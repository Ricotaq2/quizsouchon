<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quiz Musical Alain Souchon</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <video id="video-bg" autoplay playsinline>
  <source src="Montage_video_Souchon.mp4" type="video/mp4">
</video>

  <div class="quiz-container">
      <div id="app">
        <h1>Quiz Musical de Alain Souchon</h1>
    
        <p id="score"></p>
        <audio id="player" controls></audio>
    
        <div id="questionZone"></div>

        <div id="message" style="font-size:30px; margin-top:15px;"></div>

      </div>
  </div>
  
  
  

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>


<script>

const sonCanon = new Audio("Explosion.mp3");
const sonApplaudissements = new Audio("Applause.mp3");

// r√©glages optionnels
sonCanon.volume = 0.7;
sonApplaudissements.volume = 0.6;


const questions = [ 
{ extrait: "Music_01_S'asseoir par terre.mp3", options: ["C'√©tait Menti", "S'asseoir par terre", "Rive gauche"], correct: 1 },
{ extrait: "Music_02_Somerset maugham.mp3", options: ["Somerset maugham", "Petit Tas Tomb√©", "Les saisons"], correct: 0 },
{ extrait: "Music_03_Au ras des p√¢querettes.mp3", options: ["Tailler la zone", "Au ras des p√¢querettes", "Ultra moderne solitude"], correct: 1 },
{ extrait: "Music_04_On avance.mp3", options: ["Et si en plus y'a personne", "Sous les jupes des filles", "On avance"], correct: 2 },
{ extrait: "Music_05_La p'tite Bill, elle est malade.mp3", options: ["Bidon", "La p'tite Bill, elle est malade", "La compagnie"], correct: 1 },
{ extrait: "Music_06_Caterpillar.mp3", options: ["Pardon", "Le baiser", "Caterpillar"], correct: 2 },
{ extrait: "Music_07_Rive gauche.mp3", options: ["Le Bagad de Lann-Bihou√©", "Une guitare un citoyen", "Rive gauche"], correct: 2 },
{ extrait: "Music_08_Tailler la zone.mp3", options: ["Tailler la zone", "Pardon", "C'√©tait Menti"], correct: 0 },
{ extrait: "Music_09_Ultra moderne solitude.mp3", options: ["Sous les jupes des filles", "Ultra moderne solitude", "All√¥ Maman bobo"], correct: 1 },
{ extrait: "Music_10_Foule sentimentale.mp3", options: ["Foule sentimentale", "Presque", "L'amour √† la machine"], correct: 0 },
{ extrait: "Music_11_Le Bagad de Lann-Bihou√©.mp3", options: ["La vie ne vaut rien", "Petit Tas Tomb√©", "Le Bagad de Lann-Bihou√©"], correct: 2 },
{ extrait: "Music_12_Le baiser.mp3", options: ["Ballade de Jim", "C'est d√©j√† √ßa", "Le baiser"], correct: 2 },
{ extrait: "Music_13_Bidon.mp3", options: ["Et si en plus y'a personne", "J'veux du cuir", "Bidon"], correct: 2 },
{ extrait: "Music_14_L'horrible bye bye.mp3", options: ["L'horrible bye bye", "C'est d√©j√† √ßa", "Derri√®re les mots"], correct: 0 },
{ extrait: "Music_15_On s'aime pas.mp3", options: ["Presque", "On s'aime pas", "Ultra moderne solitude"], correct: 1 },
{ extrait: "Music_16_Petit Tas Tomb√©.mp3", options: ["C'est comme vous voulez", "Le marin", "Petit Tas Tomb√©"], correct: 2 },
{ extrait: "Music_17_Sous les jupes des filles.mp3", options: ["Sous les jupes des filles", "Banale song", "Rame"], correct: 0 },
{ extrait: "Music_18_J'ai dix ans.mp3", options: ["Les regrets", "J'ai dix ans", "All√¥ Maman bobo"], correct: 1 },
{ extrait: "Music_19_C'√©tait Menti.mp3", options: ["Banale song", "All√¥ Maman bobo", "C'√©tait Menti"], correct: 2 },
{ extrait: "Music_20_La compagnie.mp3", options: ["La compagnie", "L'amour √† la machine", "Ballade de Jim"], correct: 0 },
{ extrait: "Music_21_Et si en plus y'a personne.mp3", options: ["Quand je serai K.O.", "Les regrets", "Et si en plus y'a personne"], correct: 2 },
{ extrait: "Music_22_La vie Th√©odore.mp3", options: ["La vie Th√©odore", "Pardon", "Banale song"], correct: 0 },
{ extrait: "Music_23_Les saisons.mp3", options: ["Ballade de Jim", "La vie ne vaut rien", "Les saisons"], correct: 2 },
{ extrait: "Music_24_Pardon.mp3", options: ["Caterpillar", "Pardon", "Banale song"], correct: 1 },
{ extrait: "Music_25_Une guitare un citoyen.mp3", options: ["Une guitare un citoyen", "C'est d√©j√† √ßa", "C'est comme vous voulez"], correct: 0 },

];

let index = 0;
let score = 0;

function recommencerQuiz() {
  index = 0;
  score = 0;
  afficherQuestion();
}


function afficherQuestion() {
document.getElementById("message").textContent = "";
  if (index >= questions.length) return afficherResultat();
  const q = questions[index];
  document.getElementById("player").src = q.extrait;
  let html = `<p class='question'>Question ${index + 1} / ${questions.length}</p>`;
  q.options.forEach((opt, i) => {
    html += `<button class='btn' onclick='choisir(${i})'>${opt}</button><br>`;
  });
  document.getElementById("questionZone").innerHTML = html;
  
}


function choisir(i) {
  if (i === questions[index].correct) {
    score++;
    document.getElementById("message").textContent = "‚úÖ Bonne r√©ponse !";
  } else {
    document.getElementById("message").textContent = "‚ùå Mauvaise r√©ponse";
  }

  index++;
  setTimeout(afficherQuestion, 1100);
}



function afficherResultat() {
  const total = questions.length;
  let message = "";
  let boutonRecommencer = "";

  if (score === total) {
    message = "üéâ Sans faute ! Incroyable performance !";
    lancerConfettis();
  } 
  else if (score >= total * 0.8) {
    message = "üëè Excellent score ! Tu y es presque !";
    boutonRecommencer = `<button class="btn" onclick="recommencerQuiz()">Recommencer</button>`;
  } 
  else {
    message = "üí™ Continue, tu peux faire mieux !";
    boutonRecommencer = `<button class="btn" onclick="recommencerQuiz()">Recommencer</button>`;
  }

  document.getElementById("questionZone").innerHTML = `
    <h1>Quiz termin√© !</h1>
    <p>Ton score : ${score} / ${total}</p>
    <p style="font-size:22px; font-weight:bold;">${message}</p>
    ${boutonRecommencer}
  `;
}


function lancerConfettis() {
  // üîä sons
  sonCanon.currentTime = 0;
  sonApplaudissements.currentTime = 0;
  sonCanon.play();
  sonApplaudissements.play();

  const duration = 2000;
  const end = Date.now() + duration;

  (function frame() {
    confetti({ particleCount: 6, angle: 60, spread: 55, origin: { x: 0 } });
    confetti({ particleCount: 6, angle: 120, spread: 55, origin: { x: 1 } });

    if (Date.now() < end) requestAnimationFrame(frame);
  })();
}



/* function lancerConfettis() {
  const duration = 2000;
  const end = Date.now() + duration;

  (function frame() {
    confetti({ particleCount: 6, angle: 60, spread: 55, origin: { x: 0 } });
    confetti({ particleCount: 6, angle: 120, spread: 55, origin: { x: 1 } });

    if (Date.now() < end) requestAnimationFrame(frame);
  })();
} */

// afficherQuestion();
const DELAI_AVANT_QUIZ = 14000; // 4 secondes

setTimeout(() => {
  if (typeof afficherQuestion === "function") {
    afficherQuestion();
  }
}, DELAI_AVANT_QUIZ);


</script>

<script>
  const video = document.getElementById("video-bg");
  const quiz = document.querySelector(".quiz-container");

  if (video && quiz) {
    video.addEventListener("ended", () => {
      // disparition progressive de la vid√©o
      video.style.opacity = 0;

      setTimeout(() => {
        video.style.display = "none";

        // apparition du quiz
        quiz.style.display = "block";
        setTimeout(() => {
          quiz.style.opacity = 1;
        }, 50);

      }, 500);
    });
  }
</script>


  
</body>

</html>
